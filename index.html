<html lang="en">
	<head>
	  <meta charset="utf-8">
	  <title>Vue Timeline</title>
	  <meta name="description" content="Test Lab">
	  <meta name="author" content="Thijs Kuilman">
	  <link rel="stylesheet" href="assets/css/main.css">
	</head>

	<body>

		<div id="app">
			<div class="timeline" id="timeline" v-on:mousemove="dragTimeline($event)" v-on:mousedown="setMouseTracking($event, true)" v-on:mouseup="setMouseTracking($event, false)" v-on:mouseleave="disableScrolling()">
				<div class="upper-events">
					<div class="event-card" v-for="event in upperTimelineEvents">
						<div class="date">{{ event.date }}</div> 
						<div class="title">{{ event.title }}</div>
						<div class="description">{{ event.description }}</div>

						<div class="pointer">
							<div class="line"></div>
							<div class="circle"></div>
						</div>
					</div>
				</div>

				<div class="mainline" id="mainline"></div>

				<div class="lower-events">
					<div class="event-card" v-for="event in lowerTimelineEvents">
						<div class="date">{{ event.date }}</div> 
						<div class="title">{{ event.title }}</div>
						<div class="description">{{ event.description }}</div>

						<div class="pointer">
							<div class="line"></div>
							<div class="circle"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

	<script src="https://unpkg.com/vue"></script>
</html>

<script type="text/javascript">
	var app = new Vue({
		el: '#app',
		data: {
			events: [
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Optreden Amsterdam', description: 'Lorem ipsum dolor sit amet', date: '19-10-2017'  },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Den Haag feest', description: 'Lorem ipsum dolor sit amet', date: '05-11-2017' },
				{ title: 'Groningen Festival', description: 'Lorem ipsum dolor sit amet', date: '19-11-2017' }
			],
			scrollable: false,
			mouseTracking: false,
			start_x: 5,
		},
		mounted: function() {
			document.getElementById("mainline").style.width = timeline.scrollWidth;
		},
		computed: {
			lowerTimelineEvents: function () {
				return this.events.filter(function (event, index) {
					if(index % 2 === 0) {
						return event;
					}
				})
			},
			upperTimelineEvents: function () {
				return this.events.filter(function (event, index) {
					if(index % 2 !== 0) {
						return event;
					}
				})
			},
		},
		methods: {
			setMouseTracking: function(event, tracking) {
				this.start_x = event.clientX;
				this.mouseTracking = tracking;
			},
			dragTimeline: function(event) {
				if(this.mouseTracking) {
					this.current_x = event.clientX;
					movingPixels = (this.current_x - this.start_x) * -1;
					this.scrollTimeline(movingPixels);
					this.start_x = this.current_x;
				}
			},
			scrollTimeline: function(movingPixels) {
			   timeline.scrollTop += movingPixels;
			   timeline.scrollLeft += movingPixels;
			},
			disableScrolling: function(scrolling) {
				this.mouseTracking = false;
			}
		}
	})
</script>

<script>
	// var timeline = document.getElementById("timeline");
	// var scrollableTimeline = false;

	// Mouse scroll TODO: convert to Vue method
	// window.addEventListener('mousewheel', mouseWheelEvent);
	// window.addEventListener('DOMMouseScroll', mouseWheelEvent);

	// function mouseWheelEvent(e) {
	// 	if(scrollableTimeline) {
	// 		var delta = e.wheelDelta ? e.wheelDelta : -e.detail;
	// 		var movingPixels = -100;
	// 		if(delta < 0) {
	// 			movingPixels = 100;
	// 		}
	//     	scrollTimeline(movingPixels);
	// 	}
	// }

	// timeline.onmouseover = function () {
	// 	scrollableTimeline = true;
	// }	

	// timeline.onmouseleave = function () {
	// 	scrollableTimeline = false;
	// }
</script>
